type Persona {
  id: ID!
  userId: ID!
  name: String
  avatarUrl: String
  persona: PersonaData
  relationship: PersonaRelationship
  emotion: PersonaEmotion
  state: PersonaState
  settings: PersonaSettings
  meta: PersonaMeta
  createdAt: Float!
  updatedAt: Float!
}

type PersonaData {
  coreTraits: [String]
  tone: String
  archetype: String
  baseSystemPrompt: String
  dynamicSystemPrompt: String
}

type PersonaRelationship {
  trust: Float
  closeness: Float
  history: [String]
}

type PersonaEmotion {
  current: String
  lastUpdated: Float
}

type PersonaState {
  availability: String
  energy: Float
  attention: Float
}

type PersonaSettings {
  model: String
  temperature: Float
  openness: Float
  memoryRetention: Float
}

type PersonaMeta {
  version: String
  interactions: Int
  tokensUsed: Int
}

input UpdatePersonaInput {
  name: String
  avatarUrl: String
}

extend type Query {
  personas: [Persona!]
  persona(id: ID!): Persona
}

extend type Mutation {
  updatePersona(id: ID!, input: UpdatePersonaInput!): Persona!
}

type PersonaStatus {
  typing: Boolean!
  chatId: ID!
}

type Subscription {
  personaStatus(chatId: ID!): PersonaStatus!
}
